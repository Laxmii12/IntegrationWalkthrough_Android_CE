<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Integration Walkthrough</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
      color: #333;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(90deg, #32091e 0%, #8e3e53 35%, #b97a2b 100%);
      color: white;
      height: 60px;
      padding: 0 24px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .logo {
      height: 90px;
    }

    .header-title {
      font-size: 18px;
      font-weight: 600;
      color: white;
      margin-right: 30px;
      user-select: none;
    }

    .tabs {
      display: flex;
      gap: 15px;
    }

    .tab {
      font-size: 16px;
      font-weight: 500;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      background: transparent;
      border: 1px solid transparent;
      color: #ffcc80;
      user-select: none;
      transition: background 0.3s, color 0.3s;
    }
    .tab:hover {
      background: #ffcc80;
      color: #4a2b2d;
    }
    .tab.active {
      background: #ffcc80;
      color: #4a2b2d;
      border: 1px solid #ffcc80;
      cursor: default;
    }

    .header-right {
      display: flex;
      gap: 10px;
    }

    .header-button {
      background: none;
      border: 1px solid #ffcc80;
      color: #ffcc80;
      padding: 6px 12px;
      border-radius: 4px;
      font-size: 13px;
      cursor: pointer;
      transition: background 0.3s ease;
      user-select: none;
    }

    .header-button:hover {
      background: #ffcc80;
      color: #4a2b2d;
    }

    .step-container {
      display: flex;
      width: 100vw;
      height: calc(100vh - 60px);
    }

    .sidebar {
      width: 250px;
      min-width: 200px;
      background: #f8f9fa;
      border-right: 1px solid #ddd;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }

    .sidebar-item {
      padding: 15px 20px;
      cursor: pointer;
      border-bottom: 1px solid #e9ecef;
      font-size: 14px;
      color: #555;
      transition: background 0.2s;
    }

    .sidebar-item:hover {
      background: #e9ecef;
    }

    .sidebar-item.active {
      background: #ffcc80;
      color: #4a2b2d;
      font-weight: 600;
      border-left: 4px solid #b97a2b;
    }

    .left-panel {
      width: 35%;
      padding: 20px;
      background: linear-gradient(to bottom, rgb(243, 240, 240));
      overflow-y: auto;
      border-right: 1px solid #ddd;
    }

    .right-panel {
      flex: 1;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
    }

    .code-block {
      background: #f9f9f9;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 8px;
      font-family: monospace;
      white-space: pre-wrap;
      margin-top: 15px;
      max-height: 300px;
      overflow-y: auto;
    }

    audio {
      width: 100%;
      margin-top: 10px;
      display: none; /* Hide audio controls */
    }

    video {
      width: 100%;
      height: auto;
      max-height: 100%;
      border-radius: 8px;
      background: #000;
    }
  </style>
</head>
<body>

  <header>
    <div id="introScreen" style="
  position: fixed;
  top: 0; left: 0;
  width: 100vw;
  height: 100vh;
  background: linear-gradient(180deg, #32091e 0%, #8e3e53 50%, #b97a2b 100%);
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 40px;
  text-align: center;
  z-index: 9999;
">

  <h1 style="max-width: 800px; font-size: 26px; line-height: 1.5;">
    Welcome to the Integration Video Walkthrough Guide.  
    We will begin with the basic setup of the Smartech SDK.  
    <br><br>
    Please note that the SDK versions shown in this walkthrough are for reference only and may be outdated.  
    We strongly recommend using the latest SDK versions available at the time of your integration.
  </h1>

  <!-- <audio id="introAudio" autoplay>
    <source src="Introduction.mp3" type="audio/mpeg">
  </audio> -->

  <button id="startIntroButton" style="
    margin-top: 40px;
    padding: 12px 26px;
    font-size: 16px;
    background: #ffcc80;
    color: #4a2b2d;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  ">
    Start Walkthrough
  </button>

</div>

    <div class="header-left">
      <img class="logo" src="Netcore.png" alt="Logo" />
      <div class="header-title">Integration Walkthrough</div>
      <div class="tabs" id="frameworkTabs">
        <div class="tab active" data-platform="native-ios">Native Android</div>
        <div class="tab" data-platform="react-native">React Native</div>
        <div class="tab" data-platform="usecases">Use Cases</div>
        <!-- <div class="tab" data-platform="flutter">Flutter</div> -->
      </div>
    </div>
    <div class="header-right">
      <button class="header-button" id="prevButton">‚èÆ Previous</button>
      <button class="header-button" id="playButton">‚ñ∂ Play</button>
      <button class="header-button" id="nextButton">‚è≠ Next</button>
    </div>
  </header>

  <div class="step-container">
    <div class="sidebar" id="stepSidebar">
      <!-- Sidebar items will be injected here -->
    </div>
    <div class="left-panel">
      <h2 id="stepTitle">Step Title</h2>
      <p id="stepDescription">Step description goes here.</p>
      <div class="code-block" id="stepCode1"></div>
      
      <p id="stepDescription2" style="display: none;">Additional step description goes here.</p>
      <div class="code-block" id="stepCode2" style="display: none;"></div>
      <audio id="stepAudio">
        <source id="stepAudioSrc" type="audio/mpeg" />
      </audio>

      <p id="stepDescription3" style="display: none;">Additional step description goes here.</p>
      <div class="code-block" id="stepCode3" style="display: none;"></div>
      <audio id="stepAudio">
        <source id="stepAudioSrc" type="audio/mpeg" />
      </audio>
    </div>
   
  <!-- </div> -->
    <div class="right-panel">
      <video id="stepVideo" controls>
        <source id="stepVideoSrc" type="video/mp4" />
      </video>
    </div>
  </div>

  <div class="step-container" id="useCasesContainer" style="display: none;">
    <div class="sidebar" id="useCasesSidebar">
      <div class="sidebar-item" style="cursor: default; font-weight: bold; background: #e9ecef;">Event Tracking</div>
      <div class="sidebar-item" onclick="loadUseCase('usecases/eventtracking/smartechsetuseridusecase.html', this)">Smartech setUserIdentity</div>
      <div class="sidebar-item" onclick="loadUseCase('usecases/eventtracking/smartechlogin.html', this)">Smartech Login</div>
      
      <div class="sidebar-item" style="cursor: default; font-weight: bold; background: #e9ecef; border-top: 1px solid #ddd;">User Tracking</div>
      <!-- Add items later -->
    </div>
    <div class="right-panel" style="display: block; padding: 0;">
       <iframe id="useCaseFrame" style="width: 100%; height: 100%; border: none;" src=""></iframe>
    </div>
  </div>

  <script>
    const commonSteps = [
    {
  title: 'Step 1: Integrate the latest Netcore CE SDK',
  description: 'Make the following changes in the app-level or project level build.gradle based on your project structure.',
  // description2: 'Add Below line of code in Dependecies Section.',
  code1: `maven { url 'https://artifacts.netcore.co.in/artifactory/android' }'`,
  code2: `implementation 'com.netcore.android:smartech-sdk:3.7.6'`,
  audioSrc: 'android_step1.mp3',
  videoSrc: 'android_step1.mp4'
},

      {
        title: 'Step 2: Initialize Smartech SDK',
        description: 'Put your Smartech panels app Id in the meta-data tag of your applications manifest file, It should be added within the application tag, but outside of any component within the application tag.',
        description2: 'Add the below mentioned code in the onCreate() method of your Application class to Initialize the Smartech SDK.',
       // description3:'Add the following snippet of a code  to the Main Target Info.plist file',
        code1:'<meta-data android:name="SMT_APP_ID" android:value="df1558cddfe6737d68f7c6cf0bc02225" />',
        code2: `@Override
public  void  onCreate() {
    super.onCreate();
    Smartech.getInstance(new  WeakReference<>(context)).initializeSdk(this);
}`,

        audioSrc: 'android_step2.mp3',
        videoSrc: 'android_step2.mov'
      },
      // Add more common steps here if needed
      // Add more steps as needed
      {
      title: 'Step 3: Steps to Add a Test Device and Test App Features',
      description: 'Add the following intent filter to the activity that you want to handle the deep link for adding a test device in the AndroidManifest.xml file.',
      description2:'Changes in the Activity that is assigned to handle the deep link',
      code1: `<intent-filter>
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.DEFAULT" />
<category android:name="android.intent.category.BROWSABLE" />
<data android:scheme="<your-custom-scheme>"
android:host="smartech_sdk_td" />
</intent-filter>`,
code2:`class YourActivity extends  AppCompatActivity {
    ...
    @Override
    protected void onCreate(Bundle  savedInstanceState) {
        ...
        boolean isSmartechHandledDeeplink = Smartech.getInstance(new WeakReference<>(this)).isDeepLinkFromSmartech(getIntent());
        if (!isSmartechHandledDeeplink) {
        //Handle deeplink on app side
        }
        ...
    }
    ...
}`,
      audioSrc: 'android_step3.mp3',
      videoSrc: 'android_step3.mov'
    },
    {
      title: 'Step4: Integrate APN by performing below steps',
      description:'Add SmartPush SDK dependency',
     description2:'Send FCM token to Netcore CE SDK.',
     description3:'HandlePushNotification in firebase message class',
      code1: `implementation 'com.netcore.android:smartech-push:3.5.13'`,

      code2: `try {
  SmartPush smartPush = SmartPush.getInstance(new WeakReference<>(context));
  smartPush.fetchAlreadyGeneratedTokenFromFCM();
} catch (Exception e) {
  Log.e(TAG, "Fetching FCM token failed.");
}`,
code3:`public class <YourFirebaseMessagingServiceClass> extends FirebaseMessagingService {

    @Override
    public void onNewToken(@NonNull String token) {
        super.onNewToken(token);
        SmartPush.getInstance(new WeakReference<Context>(this)).setDevicePushToken(token);
        //<Your code>
    }

    @Override
    public void onMessageReceived(@NonNull RemoteMessage remoteMessage) {
        super.onMessageReceived(remoteMessage);
          boolean isPushFromSmartech = SmartPush.getInstance(new WeakReference<Context>(context)).isNotificationFromSmartech(new JSONObject(remoteMessage.getData().toString()));
          if(isPushFromSmartech){
            SmartPush.getInstance(new WeakReference<>(getApplicationContext())).handlePushNotification(remoteMessage.getData().toString());
          } else {
            // Notification received from other sources
          }
    }
}`,
      audioSrc: 'android_step4.mp3',
      videoSrc: 'android_step4.mov'
    },
    {
      title: 'Step5: Retreive Deeplink Data',
      description: `Implement a BroadcastReceiver for the Deeplinks.`,
      description2:'Register the BroadcastReceiver inside the Application class.',
      code1: `public class DeeplinkReceiver extends BroadcastReceiver {
   @Override
   public void onReceive(Context context, Intent intent) {
       try {
           Bundle bundleExtra = intent.getExtras();
           if (bundleExtra != null) {
               String deepLinkSource = bundleExtra.getString(SMTBundleKeys.SMT_KEY_DEEPLINK_SOURCE);
               String deepLink = bundleExtra.getString(SMTBundleKeys.SMT_KEY_DEEPLINK);
               String customPayload = bundleExtra.getString(SMTBundleKeys.SMT_KEY_CUSTOM_PAYLOAD);
               if (deepLink != null && !deepLink.isEmpty()) {
                   // handle deepLink for redirection. Here you can use deepLinkSource for redirection if required
               }
               if (customPayload != null && !customPayload.isEmpty()) {
                   // handle your custom payload based on deeplink source like below if required
               }
           }
       } catch (Throwable t) {
           Log.e("DeeplinkReceiver", "Error occurred in deeplink:" + t.getLocalizedMessage());
       }
   }
}
'`,
      code2:`DeeplinkReceiver deeplinkReceiver = new DeeplinkReceiver();
IntentFilter filter = new IntentFilter("com.smartech.EVENT_PN_INBOX_CLICK");
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.UPSIDE_DOWN_CAKE) {
   context.registerReceiver(deeplinkReceiver, filter, Context.RECEIVER_EXPORTED);
} else {
   context.registerReceiver(deeplinkReceiver, filter);
}
`,
      audioSrc: 'android_step5.mp3',
      videoSrc: 'android_step5.mov'
    },

//     {
//       title: 'Step6: Retreive Deeplink Data',
//       description: 'Implement a BroadcastReceiver for the Deeplinks.',
//       code1: `public class DeeplinkReceiver extends BroadcastReceiver {
//    @Override
//    public void onReceive(Context context, Intent intent) {
//        try {
//            Bundle bundleExtra = intent.getExtras();
//            if (bundleExtra != null) {
//                String deepLinkSource = bundleExtra.getString(SMTBundleKeys.SMT_KEY_DEEPLINK_SOURCE);
//                String deepLink = bundleExtra.getString(SMTBundleKeys.SMT_KEY_DEEPLINK);
//                String customPayload = bundleExtra.getString(SMTBundleKeys.SMT_KEY_CUSTOM_PAYLOAD);
//                if (deepLink != null && !deepLink.isEmpty()) {
//                    // handle deepLink for redirection. Here you can use deepLinkSource for redirection if required
//                }
//                if (customPayload != null && !customPayload.isEmpty()) {
//                    // handle your custom payload based on deeplink source like below if required
//                }
//            }
//        } catch (Throwable t) {
//            Log.e("DeeplinkReceiver", "Error occurred in deeplink:" + t.getLocalizedMessage());
//        }
//    }
// }
// `,
//       audioSrc: 'Step6.mp3',
//       videoSrc: 'Step6.mp4'
//     },
//     {
//   title: 'Step6: Integrate Firebase Cloud Messaging in your app',
//   description: `In your Content Extension's Info.plist under NSExtension -> NSExtensionAttributes:

// Change the UNNotificationExtensionCategory datatype to an Array with 3 values:
// a. Item 0: String with value "SmartechCarouselLandscapeNotification"
// b. Item 1: String with value "SmartechCarouselPortraitNotification"
// c. Item 2: String with value "SmartechPN"

// Add the following keys:
// - UNNotificationExtensionDefaultContentHidden: Boolean YES
// - UNNotificationExtensionUserInteractionEnabled: Boolean YES
// - UNNotificationExtensionInitialContentSizeRatio: Number 0.25`,
//   audioSrc: 'Step7.mp3',
//   videoSrc: 'Step7.mp4'
// },
// {
//       title: 'Step8: Enable app icon for custom push notifications.',
//       description: `By default, the Custom Push Notifications do not display the App Icon when expanded, unlike the default push notifications.To enable the App Icon visibility in the Custom Push Notifications, you must include the following steps:


//       1. Add your App Icon as image set in your assets of content extension.

//       2. In your Content Extensions Info.plist under SmartechKeys, add the SmartechNotificationIcon key with String value containing the name of the App Icon.
       
//       The SDK will check for the SmartechNotificationIcon and render the UI. In case the icon is not passed or not found, then the notification will render, taking up the space of the icons.`,
//       audioSrc: 'Step8.mp3',
//       videoSrc: 'Step8.mp4'
//     },

//     {
//       title: 'Step9: AppDelegate Push Notification Methods',
//       description: 'To enable and manage push notifications in your iOS app, you need to implement a few essential methods inside the AppDelegate class. These methods handle the registration of the device with APNs (Apple Push Notification service), manage failures during registration, and process notifications received while the app is in the foreground or background.',
//       audioSrc: 'Step9.mp3',
//       videoSrc: 'Step9.mp4'
//     },

  ];


    // Platform-specific overrides for steps - use null for steps that are same as common
    const platformOverrides = {
      'native-ios': [
        null,
        // {
        //   title: 'Native iOS Specific Init',
        //   description: 'Initialize the SDK specifically for iOS with additional configs.',
        //   code1: `Smartech.sharedInstance().initSDK(with: self, withLaunchOptions: launchOptions)`,
        //   audioSrc: 'NativeIOSStep2.mp3',
        //   videoSrc: 'NativeIOSStep2.mp4'
        // }
      ],
      'react-native': [
        {
          title: 'Step 1: Installing Smartech Base React Native',
          description: 'Netcore CE provides a React-native SDK that enables app developers to track and engage their users and view valuable analytical insights on our powerful CE dashboard.',
          code1: `npm install smartech-base-react-native`,
          audioSrc: 'rn-step1.mp3',
          videoSrc: 'rn-step1.mp4'
        },
        {
          title: 'Step 2: Installing Smartech Push React Native',
          description: 'Install Netcore CE React Native plugin using the npm package manager. And then link your native dependencies.',
          code1: `npm install smartech-push-react-native`,
          audioSrc: 'rn-step2.mp3',
          videoSrc: 'rn-step2.mp4'
        },
        {
          title: 'Step 3: Retrieving Deeplink Data',
          description: `The below method will provide the deep link value and the custom payload when a push notification is clicked.
          Use the below code when your smartech-base-react-native version is 3.5.0 or above, & smartech-push-react-native version is 3.5.0 or above..`,
          code1: `import SmartechReact from 'smartech-base-react-native';
import SmartechPushReact from 'smartech-push-react-native';

// Deeplink callback for Push Notification, InappMessage and AppInbox
 SmartechReact.addListener(SmartechReact.SmartechDeeplink, handleDeeplinkWithPayload);

const handleDeeplinkWithPayload = (smartechData) => {
     console.log('Smartech Data :: ', smartechData);
     console.log('Smartech Deeplink :: ', smartechData.smtDeeplink);
     console.log('Smartech CustomPayload:: ', smartechData.smtCustomPayload);
  };

//Remove this listener on cleanup
SmartechReact.removeListener(SmartechReact.SmartechDeeplink);
`,
          audioSrc: 'rn-step3.mp3',
          videoSrc: 'rn-step3.mp4'
        }
      ],
      // 'flutter': [
      //   null,
      //   // {
      //   //   title: 'Flutter Step 2: Initialize SDK',
      //   //   description: 'Initialize the SDK in your main.dart file.',
      //   //   code1: `NetcoreFlutterSdk.initialize();`,
      //   //   audioSrc: 'FlutterStep2.mp3',
      //   //   videoSrc: 'FlutterStep2.mp4'
      //   // }
      // ]
    };
   // -------------------------------------------------------------------------------------------------------------------------------------

   // INTRO LOGIC
const introScreen = document.getElementById('introScreen');
const introAudio = document.getElementById('introAudio');
const startIntroButton = document.getElementById('startIntroButton');

// Add safe audio start on user interaction
startIntroButton.addEventListener('click', async () => {
  try {
    await introAudio.play();   // Attempt to play audio
  } catch (e) {
    console.log("Autoplay blocked, showing manual play button.");

    // Create manual play button if autoplay is blocked
    const manualPlayBtn = document.createElement("button");
    manualPlayBtn.innerText = "‚ñ∂ Play Intro Audio";
    manualPlayBtn.style.cssText = `
      margin-top: 20px;
      padding: 10px 20px;
      background: #ffcc80;
      color: #4a2b2d;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
    `;

    manualPlayBtn.onclick = async () => {
      await introAudio.play();
      manualPlayBtn.remove();
    };

    introScreen.appendChild(manualPlayBtn);
  }

  // Hide intro screen AFTER starting audio
  introScreen.style.display = "none";

  // Load first step
  loadStep(currentStep);
});

//original
    // function getStepsForPlatform(platform) {
    //   const overrides = platformOverrides[platform] || [];
    //   return commonSteps.map((step, idx) => overrides[idx] || step);
    // }
//--------------
//     function getStepsForPlatform(platform) {
//   // React Native selected
//   if (platform === 'react-native') {
//     const rnSteps = platformOverrides['react-native'] || [];

//     // Filter native steps ‚Üí remove Step 5
//     const filteredNativeSteps = commonSteps.filter(step => {
//       return !step.title.startsWith('Step5');
//     });

//     return [...rnSteps, ...filteredNativeSteps];
//   }

//   // Native selected ‚Üí show all native steps
//   return commonSteps;
// }
//----------
function getStepsForPlatform(platform) {
  // Native flow ‚Üí unchanged
  if (platform === 'native-ios') {
    return commonSteps;
  }

  // React Native flow
  if (platform === 'react-native') {
    const rnSteps = platformOverrides['react-native'] || [];

    // RN Step 3 (last step)
    const rnStep3 = rnSteps[2];

    // RN Step 1 & 2
    const rnInitialSteps = rnSteps.slice(0, 2);

    // Native steps without Step 5
    const nativeSteps = commonSteps.filter(step => {
      return !step.title.startsWith('Step5');
    });

    // Final ordered steps
    const finalSteps = [
      ...rnInitialSteps,
      ...nativeSteps,
      rnStep3
    ];

    // üîÅ Renumber steps sequentially
    return finalSteps.map((step, index) => ({
      ...step,
      title: step.title.replace(/^Step\s*\d+:/, `Step ${index + 1}:`)
    }));
  }

  return commonSteps;
}


    

    const audio = document.getElementById('stepAudio');
    const audioSrc = document.getElementById('stepAudioSrc');
    const video = document.getElementById('stepVideo');
    const videoSrc = document.getElementById('stepVideoSrc');
    const codeBlock1 = document.getElementById('stepCode1');
    const codeBlock2 = document.getElementById('stepCode2');
    const codeBlock3 = document.getElementById('stepCode3');

    const stepTitle = document.getElementById('stepTitle');
    const stepDescription = document.getElementById('stepDescription');

    let currentPlatform = 'native-ios';
    let currentSteps = getStepsForPlatform(currentPlatform);
    let currentStep = 0;
    
    const stepSidebar = document.getElementById('stepSidebar');

    function renderSidebar() {
      stepSidebar.innerHTML = '';
      currentSteps.forEach((step, index) => {
        const item = document.createElement('div');
        item.className = 'sidebar-item';
        item.innerText = step.title;
        item.onclick = () => {
          currentStep = index;
          loadStep(currentStep);
          playStep();
        };
        stepSidebar.appendChild(item);
      });
    }

    function updateSidebarHighlight(index) {
      const items = stepSidebar.getElementsByClassName('sidebar-item');
      for (let i = 0; i < items.length; i++) {
        if (i === index) {
          items[i].classList.add('active');
          items[i].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        } else {
          items[i].classList.remove('active');
        }
      }
    }

    function loadStep(index, startTime = 0) {
  if (index < 0 || index >= currentSteps.length) return;
  
  updateSidebarHighlight(index);

  const step = currentSteps[index];

  stepTitle.innerText = step.title;
  stepDescription.innerText = step.description || '';
  codeBlock1.innerText = step.code1 || '';

 

  // Handle second description
  const stepDescription2 = document.getElementById('stepDescription2');
  if (step.description2) {
    stepDescription2.innerText = step.description2;
    stepDescription2.style.display = 'block';
  } else {
    stepDescription2.style.display = 'none';
  }
  // Handle third descrption
  const stepDescription3 = document.getElementById('stepDescription3');
  if (step.description3) {
    stepDescription3.innerText = step.description3;
    stepDescription3.style.display = 'block';
  } else {
    stepDescription3.style.display = 'none';
  }

  // Handle second code block
  if (step.code2) {
    codeBlock2.innerText = step.code2;
    codeBlock2.style.display = 'block';
  } else {
    codeBlock2.style.display = 'none';
  }

  if (step.code3) {
    codeBlock3.innerText = step.code3;
    codeBlock3.style.display = 'block';
  } else {
    codeBlock3.style.display = 'none';
  }

  audioSrc.src = step.audioSrc || '';
  videoSrc.src = step.videoSrc || '';
  audio.load();
  video.load();

  audio.onloadedmetadata = () => { audio.currentTime = startTime; };
  video.onloadedmetadata = () => { video.currentTime = startTime; };
}


    function playStep() {
      audio.play();
      video.play();
    }

    function pauseStep() {
      audio.pause();
      video.pause();
    }

    function nextStep() {
      if (currentStep < currentSteps.length - 1) {
        currentStep++;
        loadStep(currentStep);
        playStep();
      } else {
        alert('You have completed all steps!');
      }
    }

    function previousStep() {
      if (currentStep > 0) {
        currentStep--;
        loadStep(currentStep);
        playStep();
      }
    }

    document.getElementById('playButton').addEventListener('click', () => {
      if (audio.paused) {
        playStep();
      } else {
        pauseStep();
      }
    });
    document.getElementById('nextButton').addEventListener('click', nextStep);
    document.getElementById('prevButton').addEventListener('click', previousStep);

    // Sync audio and video play/pause
    audio.addEventListener('play', () => { if (video.paused) video.play(); });
    video.addEventListener('play', () => { if (audio.paused) audio.play(); });

    video.addEventListener('pause', () => { if (!audio.paused) audio.pause(); });
    audio.addEventListener('pause', () => { if (!video.paused) video.pause(); });

    video.addEventListener('seeking', () => {
      audio.currentTime = video.currentTime;
    });

    // Tabs for frameworks
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        if (tab.classList.contains('active')) return;
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        currentPlatform = tab.getAttribute('data-platform');
        
        const stepContainer = document.querySelector('.step-container');
        const useCasesContainer = document.getElementById('useCasesContainer');

        if (currentPlatform === 'usecases') {
            stepContainer.style.display = 'none';
            useCasesContainer.style.display = 'flex';
        } else {
            stepContainer.style.display = 'flex';
            useCasesContainer.style.display = 'none';
            currentSteps = getStepsForPlatform(currentPlatform);
            currentStep = 0;
            renderSidebar();
            loadStep(currentStep);
        }
      });
    });

    function loadUseCase(url, element) {
        document.getElementById('useCaseFrame').src = url;
        
        // Update active state in sidebar
        const items = document.querySelectorAll('#useCasesSidebar .sidebar-item');
        items.forEach(item => item.classList.remove('active'));
        if (element) {
            element.classList.add('active');
        }
    }

    renderSidebar();
    loadStep(currentStep);
  </script>

</body>
</html>
